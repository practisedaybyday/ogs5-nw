# Source files
set( SOURCES
	DatabaseConnection.cpp
	DiagramPrefsDialog.cpp
	ListPropertiesDialog.cpp
	ModelTreeItem.cpp
	OGSRaster.cpp
	#ProfileItem3d.cpp
	QueryResultsDialog.cpp
	StationTreeModel.cpp
	StationTreeView.cpp
)

# Moc Header files
set( MOC_HEADERS
	DatabaseConnection.h
	DiagramPrefsDialog.h
	#ProfileItem3d.h
	ListPropertiesDialog.h
	QueryResultsDialog.h
	StationTreeModel.h
	StationTreeView.h
)


# Header files
set( HEADERS
	BaseItem.h
	ModelTreeItem.h
	OGSRaster.h
)

# UI files
set( UIS
	DatabaseResultView.ui
	DiagramPrefs.ui
)

# Run Qts user interface compiler uic on .ui files
qt4_wrap_ui( UI_HEADERS ${UIS} )

# Run Qts meta object compiler moc on header files
qt4_wrap_cpp( MOC_SOURCES ${MOC_HEADERS} )

# Include the headers which are generated by uic and moc
# and include additional header
include_directories(
	.
	${CMAKE_BINARY_DIR}/Qt/Base
	${CMAKE_BINARY_DIR}/Qt/StationView
	${CMAKE_BINARY_DIR}/Qt/StationView/DiagramView
	${CMAKE_BINARY_DIR}/Qt/StationView/StratView
	../../Base
	../../MathLib
	../../GEO
	../../MSH
	../../FEM
	../../FileIO
	../Base
	../DataView
	../VtkVis
	./DiagramView
	./StratView
	${CMAKE_SOURCE_DIR}
	#${OpenSG_INCLUDE_DIR}
	#${OpenSGSupportlibs_INCLUDE_DIR}
	${libtiff_INCLUDE_DIR}
	${libgeotiff_INCLUDE_DIR}

)

# Put moc files in a project folder
source_group("UI Files" REGULAR_EXPRESSION "\\w*\\.ui")
source_group("Moc Files" REGULAR_EXPRESSION "moc_.*")



# Create the library
#add_executable( StationView
add_library( StationView STATIC
	${SOURCES}
	${HEADERS}
	${MOC_HEADERS}
	${MOC_SOURCES}
	${UIS}
)

# Link Qt library
target_link_libraries( StationView
	${QT_LIBRARIES}
	${libtiff_LIBRARIES}
	${libgeotiff_LIBRARIES}
	GEO
	MSH
	FEM
	DiagramView
	QtBase
	QtDataView
	VtkVis
)

add_dependencies( StationView DiagramView StratView )
